<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<title></title>
	<script src="Scripts/class.js"></script>
	<script src="Scripts/mustache.js"></script>
	<script src="Scripts/table-view.js"></script>
    <link href="Styles/styles.css" rel="stylesheet" />
</head>
<body>
    <script type="x-students-template" id="student-template">
        <p>First Name : <strong>{{fname}}</strong></p>
        <p>Last Name: <strong>{{lname}}</strong></p>
        {{#age}}
            <p>Age: <strong>{{age}}</strong></p>
        {{/age}}           
        {{#grade}}
            <p>Grade: <strong>{{grade}}</strong></p>
        {{/grade}}            
        <p>Marks:
            <ul>
                {{#marks}}
                    <li>{{subject}} : {{value}}</li>
                {{/marks}}
                {{^marks}}
                    <li>No marks yet</li>
                {{/marks}}
            </ul>
        </p>  
    </script>
	<div id="content"></div>
	<script>
        (function(){
            var Student = Class.create({
                init: function (fname, lname, marks, age, grade) {
                    this.fname = fname;
                    this.lname = lname;
                    this.marks = marks;
                    this.age = age;
                    this.grade = grade;
                },
                fullname: function () {
                    return this.fname + " " + this.lname;
                }
            });

            var Mark = Class.create({
                init: function (subject, value) {
                    this.subject = subject;
                    this.value = value;
                }
            });

            var people = [
                new Student("Doncho", "Minkov", [new Mark("Math", 4), new Mark("JavaScript", 6)]),
                new Student("Nikolay", "Kostov", [new Mark("MVC", 6), new Mark("JavaScript", 5)]),
                new Student("Ivaylo", "Kendov", [new Mark("OOP", 4), new Mark("C#", 6)]),
                new Student("Svetlin", "Nakov", [new Mark("Unit Testing", 5), new Mark("WPF", 6)]),
                new Student("Asya", "Georgieva", [new Mark("Automation Testing", 6), new Mark("Manual Testing", 4)]),			
                new Student("Georgi", "Georgiev", [new Mark("OOP", 4), new Mark("C#", 6)]),
                new Student("Georgi", "OPwetrov"),
                new Student("Pavel", "Georgiev", [new Mark("Automation Testing", 6), new Mark("Manual Testing", 4)]),
                new Student("Todor", "Georgiev"),
                new Student("Tihomir", "Georgiev", [new Mark("Automation Testing", 6), new Mark("Manual Testing", 4)]),
                {}
            ];

            var personTemplate = Mustache.compile(document.getElementById("student-template").innerHTML);

            var tableView = controls.getTableView(people, {cols:3, rows: 3});

            var tableViewHtml = tableView.render(personTemplate);

            document.getElementById("content").innerHTML = tableViewHtml;
        })()
	</script>
</body>
</html>
